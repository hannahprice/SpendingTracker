@page "/transactions"

<section>
    @if (!IsLoading && !Transactions.Any())
    {
        <p>No transactions</p>
    } 
    else
    {
        <MudText Typo="Typo.h2" Class="my-8">Transaction list</MudText>

        <MudTable 
            Items="@Transactions" 
            Hover="true" 
            Dense="true"
            Striped="true"
            Breakpoint="Breakpoint.Sm" 
            Loading="@IsLoading"
            LoadingProgressColor="Color.Info">
            <HeaderContent>
                <MudTh>Id</MudTh>
                <MudTh>Date</MudTh>
                <MudTh>Description</MudTh>
                <MudTh>Amount</MudTh>
                <MudTh>Is outward payment</MudTh>
                <MudTh>Is reoccuring</MudTh>
                <MudTh>Reoccuring frequency</MudTh>
                <MudTh>Categories</MudTh>
                <MudTh>Subcategories</MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Id">@context.Id</MudTd>
                <MudTd DataLabel="Date">@context.DateOfTransaction</MudTd>
                <MudTd DataLabel="Description">@context.Description</MudTd>
                <MudTd DataLabel="Amount">@context.Amount</MudTd>
                <MudTd DataLabel="Is outward payment">@context.IsOutwardPayment</MudTd>
                <MudTd DataLabel="Is reoccuring">@context.IsReoccurring</MudTd>
                @if (@context.IsReoccurring)
                {
                <MudTd DataLabel="Reoccuring frequency">@context.ReoccuringFrequency</MudTd>
                } 
                else
                {
                    <MudTd DataLabel="Reoccuring frequency">-</MudTd>                
                }
                
                @if (@context.Categories != null && @context.Categories.Any())
                {
                    <MudTd DataLabel="Categories">@string.Join(",", context.Categories)</MudTd>
                }
                else
                {
                    <MudTd DataLabel="Categories">-</MudTd>
                }
                
                @if (@context.Subcategories != null && @context.Subcategories.Any())
                {
                    <MudTd DataLabel="Subcategories">@string.Join(",", context.Subcategories)</MudTd>
                }
                else
                {
                    <MudTd DataLabel="Subcategories">-</MudTd>
                }
            </RowTemplate>
        </MudTable>
    }
</section>
